(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6355cc3c"],{"00ee":function(e,t,r){"use strict";var n=r("b622"),a=n("toStringTag"),i={};i[a]="z",e.exports="[object z]"===String(i)},"1de0":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("recording",{attrs:{recordType:e.recordType}})],1)},a=[],i=r("58bb"),o={data(){return{recordType:"camera"}},components:{Recording:i["a"]},destroyed(){console.log("销毁camera")}},s=o,c=r("2877"),d=Object(c["a"])(s,n,a,!1,null,null,null);t["default"]=d.exports},"271a":function(e,t,r){"use strict";var n=r("cb2d"),a=r("e330"),i=r("577e"),o=r("d6d6"),s=URLSearchParams,c=s.prototype,d=a(c.getAll),l=a(c.has),u=new s("a=1");!u.has("a",2)&&u.has("a",void 0)||n(c,"has",(function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&void 0===r)return l(this,e);var n=d(this,e);o(t,1);var a=i(r),s=0;while(s<n.length)if(n[s++]===a)return!0;return!1}),{enumerable:!0,unsafe:!0})},5494:function(e,t,r){"use strict";var n=r("83ab"),a=r("e330"),i=r("edd0"),o=URLSearchParams.prototype,s=a(o.forEach);n&&!("size"in o)&&i(o,"size",{get:function(){var e=0;return s(this,(function(){e++})),e},configurable:!0,enumerable:!0})},"577e":function(e,t,r){"use strict";var n=r("f5df"),a=String;e.exports=function(e){if("Symbol"===n(e))throw new TypeError("Cannot convert a Symbol value to a string");return a(e)}},"58bb":function(e,t,r){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"screen-container"},[t("div",{staticClass:"screen-btn"},[t("el-button",{attrs:{type:"primary",disabled:e.sFlag},on:{click:e.startRecord}},[e._v("开始")]),t("el-button",{attrs:{type:"danger",disabled:!e.sFlag},on:{click:e.endRecord}},[e._v("结束")]),t("el-button",{attrs:{type:"success",disabled:e.dFlag},on:{click:e.downloadRecord}},[e._v("下载")])],1),t("video",{attrs:{id:"video",controls:"",width:"600px"}})])},a=[],i=(r("14d9"),r("88a7"),r("271a"),r("5494"),{props:{recordType:{type:String,default(){return"screen"}}},data(){return{videoElement:null,mediaRecorder:null,chunks:[],sFlag:!1,dFlag:!0}},mounted(){this.videoElement=document.getElementById("video")},methods:{startRecord(){if("screen"===this.recordType)navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia&&navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0,cursor:"always"}).then(e=>{this.handleMedia(e)}).catch(e=>{console.log("err---\x3e",e)});else if("camera"===this.recordType){let e={audio:!0,video:{width:1280,height:720}};navigator.mediaDevices.getUserMedia(e).then(e=>{this.handleMedia(e)}).catch(e=>{console.log(e.name+": "+e.message)})}},endRecord(){if("screen"===this.recordType){let e=this.videoElement.srcObject.getTracks();e.forEach(e=>e.stop())}this.mediaRecorder.stop()},downloadRecord(){let e=new Blob(this.chunks,{type:"video/ogg; codecs=opus"}),t=window.URL.createObjectURL(e),r=document.createElement("a");r.style.display="none",r.href=t,r.setAttribute("download","video.webm"),document.body.appendChild(r),r.click(),document.body.removeChild(r)},handleMedia(e){this.chunks=[],this.sFlag=!0,this.dFlag=!0,this.mediaRecorder=new MediaRecorder(e),this.mediaRecorder.start(),this.mediaRecorder.ondataavailable=e=>{console.log("available",e),this.sFlag=!1,this.dFlag=!1,this.chunks.push(e.data);let t=URL.createObjectURL(e.data,{type:"video/ogg"});this.videoElement.srcObject=null,this.videoElement.src=t,this.videoElement.autoplay=!1},window.URL.revokeObjectURL(this.videoElement.src),this.videoElement.srcObject=e,this.videoElement.play()}}}),o=i,s=(r("9834"),r("2877")),c=Object(s["a"])(o,n,a,!1,null,null,null);t["a"]=c.exports},"88a7":function(e,t,r){"use strict";var n=r("cb2d"),a=r("e330"),i=r("577e"),o=r("d6d6"),s=URLSearchParams,c=s.prototype,d=a(c.append),l=a(c["delete"]),u=a(c.forEach),h=a([].push),v=new s("a=1&a=2&b=3");v["delete"]("a",1),v["delete"]("b",void 0),v+""!=="a=2"&&n(c,"delete",(function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&void 0===r)return l(this,e);var n=[];u(this,(function(e,t){h(n,{key:t,value:e})})),o(t,1);var a,s=i(e),c=i(r),v=0,g=0,p=!1,f=n.length;while(v<f)a=n[v++],p||a.key===s?(p=!0,l(this,a.key)):g++;while(g<f)a=n[g++],a.key===s&&a.value===c||d(this,a.key,a.value)}),{enumerable:!0,unsafe:!0})},9834:function(e,t,r){"use strict";r("aa46")},aa46:function(e,t,r){},d6d6:function(e,t,r){"use strict";var n=TypeError;e.exports=function(e,t){if(e<t)throw new n("Not enough arguments");return e}},edd0:function(e,t,r){"use strict";var n=r("13d2"),a=r("9bf2");e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),a.f(e,t,r)}},f5df:function(e,t,r){"use strict";var n=r("00ee"),a=r("1626"),i=r("c6b6"),o=r("b622"),s=o("toStringTag"),c=Object,d="Arguments"===i(function(){return arguments}()),l=function(e,t){try{return e[t]}catch(r){}};e.exports=n?i:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=l(t=c(e),s))?r:d?i(t):"Object"===(n=i(t))&&a(t.callee)?"Arguments":n}}}]);