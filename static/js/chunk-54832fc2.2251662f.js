(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54832fc2"],{"1de0":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("recording",{attrs:{recordType:e.recordType}})],1)},i=[],n=a("58bb"),o={data(){return{recordType:"camera"}},components:{Recording:n["a"]},destroyed(){console.log("销毁camera")}},s=o,d=a("2877"),c=Object(d["a"])(s,r,i,!1,null,null,null);t["default"]=c.exports},"271a":function(e,t,a){"use strict";var r=a("cb2d"),i=a("e330"),n=a("577e"),o=a("d6d6"),s=URLSearchParams,d=s.prototype,c=i(d.getAll),l=i(d.has),u=new s("a=1");!u.has("a",2)&&u.has("a",void 0)||r(d,"has",(function(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return l(this,e);var r=c(this,e);o(t,1);var i=n(a),s=0;while(s<r.length)if(r[s++]===i)return!0;return!1}),{enumerable:!0,unsafe:!0})},5494:function(e,t,a){"use strict";var r=a("83ab"),i=a("e330"),n=a("edd0"),o=URLSearchParams.prototype,s=i(o.forEach);r&&!("size"in o)&&n(o,"size",{get:function(){var e=0;return s(this,(function(){e++})),e},configurable:!0,enumerable:!0})},"577e":function(e,t,a){"use strict";var r=a("f5df"),i=String;e.exports=function(e){if("Symbol"===r(e))throw new TypeError("Cannot convert a Symbol value to a string");return i(e)}},"58bb":function(e,t,a){"use strict";var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"screen-container"},[t("div",{staticClass:"screen-btn"},[t("el-button",{attrs:{type:"primary",disabled:e.sFlag},on:{click:e.startRecord}},[e._v("开始")]),t("el-button",{attrs:{type:"danger",disabled:!e.sFlag},on:{click:e.endRecord}},[e._v("结束")]),t("el-button",{attrs:{type:"success",disabled:e.dFlag},on:{click:e.downloadRecord}},[e._v("下载")])],1),t("video",{attrs:{id:"video",controls:"",width:"600px"}})])},i=[],n=(a("14d9"),a("e9f5"),a("7d54"),a("88a7"),a("271a"),a("5494"),{props:{recordType:{type:String,default(){return"screen"}}},data(){return{videoElement:null,mediaRecorder:null,chunks:[],sFlag:!1,dFlag:!0}},mounted(){this.videoElement=document.getElementById("video")},methods:{startRecord(){if("screen"===this.recordType)navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia&&navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0,cursor:"always"}).then(e=>{this.handleMedia(e)}).catch(e=>{console.log("err---\x3e",e)});else if("camera"===this.recordType){let e={audio:!0,video:{width:1280,height:720}};navigator.mediaDevices.getUserMedia(e).then(e=>{this.handleMedia(e)}).catch(e=>{console.log(e.name+": "+e.message)})}},endRecord(){if("screen"===this.recordType){let e=this.videoElement.srcObject.getTracks();e.forEach(e=>e.stop())}this.mediaRecorder.stop()},downloadRecord(){let e=new Blob(this.chunks,{type:"video/ogg; codecs=opus"}),t=window.URL.createObjectURL(e),a=document.createElement("a");a.style.display="none",a.href=t,a.setAttribute("download","video.webm"),document.body.appendChild(a),a.click(),document.body.removeChild(a)},handleMedia(e){this.chunks=[],this.sFlag=!0,this.dFlag=!0,this.mediaRecorder=new MediaRecorder(e),this.mediaRecorder.start(),this.mediaRecorder.ondataavailable=e=>{console.log("available",e),this.sFlag=!1,this.dFlag=!1,this.chunks.push(e.data);let t=URL.createObjectURL(e.data,{type:"video/ogg"});this.videoElement.srcObject=null,this.videoElement.src=t,this.videoElement.autoplay=!1},window.URL.revokeObjectURL(this.videoElement.src),this.videoElement.srcObject=e,this.videoElement.play()}}}),o=n,s=(a("9834"),a("2877")),d=Object(s["a"])(o,r,i,!1,null,null,null);t["a"]=d.exports},"88a7":function(e,t,a){"use strict";var r=a("cb2d"),i=a("e330"),n=a("577e"),o=a("d6d6"),s=URLSearchParams,d=s.prototype,c=i(d.append),l=i(d["delete"]),u=i(d.forEach),h=i([].push),v=new s("a=1&a=2&b=3");v["delete"]("a",1),v["delete"]("b",void 0),v+""!=="a=2"&&r(d,"delete",(function(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return l(this,e);var r=[];u(this,(function(e,t){h(r,{key:t,value:e})})),o(t,1);var i,s=n(e),d=n(a),v=0,p=0,g=!1,m=r.length;while(v<m)i=r[v++],g||i.key===s?(g=!0,l(this,i.key)):p++;while(p<m)i=r[p++],i.key===s&&i.value===d||c(this,i.key,i.value)}),{enumerable:!0,unsafe:!0})},9834:function(e,t,a){"use strict";a("aa46")},aa46:function(e,t,a){},d6d6:function(e,t,a){"use strict";var r=TypeError;e.exports=function(e,t){if(e<t)throw new r("Not enough arguments");return e}}}]);